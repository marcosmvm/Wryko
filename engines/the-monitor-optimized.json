{
  "name": "M - The Monitor (Churn Risk Detector)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": 1,
              "triggerAtHour": 6
            }
          ]
        }
      },
      "id": "weekly-trigger",
      "name": "Weekly Risk Assessment (Monday 6am)",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [0, 0]
    },
    {
      "parameters": {
        "operation": "read",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Clients"
        },
        "filters": {
          "conditions": [
            {
              "lookupColumn": "status",
              "lookupValue": "active"
            }
          ]
        }
      },
      "id": "get-active-clients",
      "name": "Get Active Clients",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [220, -110]
    },
    {
      "parameters": {
        "operation": "read",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Meeting_Log"
        }
      },
      "id": "get-meeting-history",
      "name": "Get Meeting History",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [220, 0]
    },
    {
      "parameters": {
        "operation": "read",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Report_History"
        }
      },
      "id": "get-performance-history",
      "name": "Get Performance History",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [220, 110]
    },
    {
      "parameters": {
        "operation": "read",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Support_Tickets"
        }
      },
      "id": "get-support-tickets",
      "name": "Get Support Tickets",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [220, 220]
    },
    {
      "parameters": {
        "operation": "read",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Client_Communications"
        }
      },
      "id": "get-communications",
      "name": "Get Client Communications",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [220, 330]
    },
    {
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": []
        },
        "combinationMode": "mergeByPosition",
        "options": {
          "includeUnpaired": true
        }
      },
      "id": "merge-data",
      "name": "Merge All Data",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [440, 110]
    },
    {
      "parameters": {
        "jsCode": "// Calculate churn risk signals for each client\nconst clients = $('Get Active Clients').all().map(i => i.json);\nconst meetings = $('Get Meeting History').all().map(i => i.json);\nconst performance = $('Get Performance History').all().map(i => i.json);\nconst tickets = $('Get Support Tickets').all().map(i => i.json);\nconst communications = $('Get Client Communications').all().map(i => i.json);\n\nconst now = new Date();\nconst fourWeeksAgo = new Date(now - 28 * 24 * 60 * 60 * 1000);\nconst twoWeeksAgo = new Date(now - 14 * 24 * 60 * 60 * 1000);\n\nconst riskAssessments = [];\n\nfor (const client of clients) {\n  const clientId = client.client_id;\n  \n  // Initialize risk signals with weights\n  const signals = {\n    missed_calls: { score: 0, weight: 25, details: '' },\n    low_reply_rates: { score: 0, weight: 20, details: '' },\n    negative_sentiment: { score: 0, weight: 20, details: '' },\n    low_engagement: { score: 0, weight: 15, details: '' },\n    support_spikes: { score: 0, weight: 10, details: '' },\n    renewal_approaching: { score: 0, weight: 10, details: '' }\n  };\n  \n  // 1. Check missed calls (25% weight)\n  const clientMeetings = meetings.filter(m => m.client_id === clientId);\n  const recentMeetings = clientMeetings.filter(m => new Date(m.scheduled_date) >= fourWeeksAgo);\n  const missedMeetings = recentMeetings.filter(m => m.status === 'no_show' || m.status === 'cancelled');\n  const missedRatio = recentMeetings.length > 0 ? missedMeetings.length / recentMeetings.length : 0;\n  \n  if (missedRatio >= 0.5) {\n    signals.missed_calls.score = 100;\n    signals.missed_calls.details = `${missedMeetings.length}/${recentMeetings.length} meetings missed (50%+ rate)`;\n  } else if (missedRatio >= 0.25) {\n    signals.missed_calls.score = 50;\n    signals.missed_calls.details = `${missedMeetings.length}/${recentMeetings.length} meetings missed`;\n  }\n  \n  // 2. Check reply rates with actual WoW comparison (20% weight)\n  const clientPerformance = performance.filter(p => p.client_id === clientId);\n  const recentPerformance = clientPerformance\n    .filter(p => new Date(p.report_date) >= fourWeeksAgo)\n    .sort((a, b) => new Date(b.report_date) - new Date(a.report_date));\n  \n  if (recentPerformance.length >= 2) {\n    const latestRate = parseFloat(recentPerformance[0].reply_rate) || 0;\n    const previousRate = parseFloat(recentPerformance[1].reply_rate) || 0;\n    const rateDrop = previousRate > 0 ? ((previousRate - latestRate) / previousRate) * 100 : 0;\n    \n    if (latestRate < 1 || rateDrop >= 50) {\n      signals.low_reply_rates.score = 100;\n      signals.low_reply_rates.details = `Reply rate: ${latestRate.toFixed(1)}% (${rateDrop > 0 ? '-' + rateDrop.toFixed(0) + '% WoW' : 'critically low'})`;\n    } else if (latestRate < 2 || rateDrop >= 25) {\n      signals.low_reply_rates.score = 50;\n      signals.low_reply_rates.details = `Reply rate: ${latestRate.toFixed(1)}% (below 2% benchmark)`;\n    }\n  } else if (recentPerformance.length === 1) {\n    const latestRate = parseFloat(recentPerformance[0].reply_rate) || 0;\n    if (latestRate < 2) {\n      signals.low_reply_rates.score = 40;\n      signals.low_reply_rates.details = `Reply rate: ${latestRate.toFixed(1)}% (limited data)`;\n    }\n  }\n  \n  // 3. Check sentiment in communications (20% weight)\n  const clientComms = communications.filter(c => c.client_id === clientId);\n  const recentComms = clientComms.filter(c => new Date(c.date) >= twoWeeksAgo);\n  \n  const negativeKeywords = ['frustrated', 'disappointed', 'cancel', 'not working', 'waste', 'terrible', 'unhappy', 'issue', 'problem', 'refund', 'concerned'];\n  let negativeCount = 0;\n  \n  for (const comm of recentComms) {\n    const text = (comm.message || '').toLowerCase();\n    if (negativeKeywords.some(kw => text.includes(kw))) {\n      negativeCount++;\n    }\n  }\n  \n  if (negativeCount >= 3) {\n    signals.negative_sentiment.score = 100;\n    signals.negative_sentiment.details = `${negativeCount} negative communications in 2 weeks`;\n  } else if (negativeCount >= 1) {\n    signals.negative_sentiment.score = 40;\n    signals.negative_sentiment.details = `${negativeCount} concerning communication(s)`;\n  }\n  \n  // 4. Check engagement (15% weight)\n  const lastActivity = client.last_portal_login ? new Date(client.last_portal_login) : null;\n  const daysSinceActivity = lastActivity ? Math.floor((now - lastActivity) / (24 * 60 * 60 * 1000)) : 999;\n  \n  if (daysSinceActivity >= 14) {\n    signals.low_engagement.score = 100;\n    signals.low_engagement.details = `No portal activity in ${daysSinceActivity} days`;\n  } else if (daysSinceActivity >= 7) {\n    signals.low_engagement.score = 50;\n    signals.low_engagement.details = `Low engagement - ${daysSinceActivity} days since last login`;\n  }\n  \n  // 5. Check support ticket spikes (10% weight)\n  const clientTickets = tickets.filter(t => t.client_id === clientId);\n  const recentTickets = clientTickets.filter(t => new Date(t.created_at) >= twoWeeksAgo);\n  \n  if (recentTickets.length >= 5) {\n    signals.support_spikes.score = 100;\n    signals.support_spikes.details = `${recentTickets.length} support tickets in 2 weeks`;\n  } else if (recentTickets.length >= 3) {\n    signals.support_spikes.score = 50;\n    signals.support_spikes.details = `${recentTickets.length} support tickets in 2 weeks`;\n  }\n  \n  // 6. Check renewal date (10% weight)\n  const renewalDate = client.renewal_date ? new Date(client.renewal_date) : null;\n  const daysToRenewal = renewalDate ? Math.floor((renewalDate - now) / (24 * 60 * 60 * 1000)) : 999;\n  \n  if (daysToRenewal <= 30 && daysToRenewal > 0) {\n    signals.renewal_approaching.score = 70;\n    signals.renewal_approaching.details = `Renewal in ${daysToRenewal} days`;\n  } else if (daysToRenewal <= 60 && daysToRenewal > 0) {\n    signals.renewal_approaching.score = 30;\n    signals.renewal_approaching.details = `Renewal in ${daysToRenewal} days`;\n  }\n  \n  // Calculate overall health score (inverse of risk)\n  let totalWeightedScore = 0;\n  let totalWeight = 0;\n  \n  for (const [key, signal] of Object.entries(signals)) {\n    totalWeightedScore += (signal.score * signal.weight);\n    totalWeight += signal.weight;\n  }\n  \n  const riskScore = totalWeight > 0 ? Math.round(totalWeightedScore / totalWeight) : 0;\n  const healthScore = 100 - riskScore;\n  \n  // Determine risk level\n  let riskLevel, status;\n  if (healthScore >= 80) {\n    riskLevel = 'low';\n    status = 'Healthy';\n  } else if (healthScore >= 50) {\n    riskLevel = 'medium';\n    status = 'At Risk';\n  } else {\n    riskLevel = 'high';\n    status = 'Critical';\n  }\n  \n  // Get primary risk factor\n  const sortedSignals = Object.entries(signals)\n    .filter(([k, v]) => v.score > 0)\n    .sort((a, b) => (b[1].score * b[1].weight) - (a[1].score * a[1].weight));\n  \n  const primaryRisk = sortedSignals[0] ? {\n    factor: sortedSignals[0][0].replace(/_/g, ' '),\n    details: sortedSignals[0][1].details\n  } : null;\n  \n  riskAssessments.push({\n    client_id: clientId,\n    company_name: client.company_name,\n    primary_email: client.primary_email,\n    health_score: healthScore,\n    risk_score: riskScore,\n    risk_level: riskLevel,\n    status,\n    signals,\n    primary_risk: primaryRisk,\n    contract_value: parseFloat(client.contract_value) || 0,\n    renewal_date: client.renewal_date,\n    assessed_at: now.toISOString()\n  });\n}\n\n// Sort by risk (lowest health first)\nriskAssessments.sort((a, b) => a.health_score - b.health_score);\n\nreturn riskAssessments.map(r => ({ json: r }));"
      },
      "id": "calculate-risk-scores",
      "name": "Calculate Risk Scores",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [660, 110]
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Health_Score_History"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json.client_id }}",
            "company_name": "={{ $json.company_name }}",
            "health_score": "={{ $json.health_score }}",
            "risk_level": "={{ $json.risk_level }}",
            "status": "={{ $json.status }}",
            "primary_risk_factor": "={{ $json.primary_risk?.factor || 'None' }}",
            "primary_risk_details": "={{ $json.primary_risk?.details || 'None' }}",
            "assessed_at": "={{ $json.assessed_at }}"
          }
        }
      },
      "id": "log-health-scores",
      "name": "Log Health Scores",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [880, 0]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "is-at-risk",
              "leftValue": "={{ $json.health_score }}",
              "rightValue": 80,
              "operator": {
                "type": "number",
                "operation": "lt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "filter-at-risk",
      "name": "Filter At-Risk Clients",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [880, 220]
    },
    {
      "parameters": {
        "model": "gpt-4o",
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You are a customer success strategist for XGrowthOS, an autonomous B2B lead generation platform. Generate specific, actionable intervention recommendations based on client health signals. Be concise and practical."
            },
            {
              "role": "user",
              "content": "=Generate an intervention playbook for this at-risk client:\n\nClient: {{ $json.company_name }}\nHealth Score: {{ $json.health_score }}/100 ({{ $json.status }})\nContract Value: ${{ $json.contract_value }}\nRenewal Date: {{ $json.renewal_date || 'Not set' }}\n\nRisk Signals:\n{{ Object.entries($json.signals).filter(([k, v]) => v.score > 0).map(([k, v]) => `- ${k.replace(/_/g, ' ')}: ${v.details} (impact: ${v.score}%)`).join('\\n') }}\n\nPrimary Risk: {{ $json.primary_risk?.factor || 'Multiple factors' }} - {{ $json.primary_risk?.details || 'See signals above' }}\n\nProvide:\n1. Immediate action (within 24 hours)\n2. Short-term intervention (this week)\n3. Follow-up strategy (next 2 weeks)\n4. Key talking points for CSM call"
            }
          ]
        },
        "options": {
          "temperature": 0.4,
          "maxTokens": 600
        }
      },
      "id": "generate-intervention",
      "name": "Generate Intervention Playbook",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.6,
      "position": [1100, 220]
    },
    {
      "parameters": {
        "jsCode": "// Structure the intervention plan\nconst riskData = $('Filter At-Risk Clients').first().json;\nconst aiIntervention = $('Generate Intervention Playbook').first().json;\n\nconst interventionPlan = {\n  ...riskData,\n  intervention_plan: aiIntervention.message?.content || aiIntervention.text || 'Unable to generate plan',\n  created_at: new Date().toISOString(),\n  status: 'pending_action'\n};\n\nreturn [{ json: interventionPlan }];"
      },
      "id": "structure-intervention",
      "name": "Structure Intervention Plan",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1320, 220]
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Intervention_Plans"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json.client_id }}",
            "company_name": "={{ $json.company_name }}",
            "health_score": "={{ $json.health_score }}",
            "risk_level": "={{ $json.risk_level }}",
            "primary_risk": "={{ $json.primary_risk?.factor }}",
            "intervention_plan": "={{ $json.intervention_plan }}",
            "created_at": "={{ $json.created_at }}",
            "status": "={{ $json.status }}"
          }
        }
      },
      "id": "log-intervention",
      "name": "Log Intervention Plan",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [1540, 220]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "is-critical",
              "leftValue": "={{ $json.health_score }}",
              "rightValue": 50,
              "operator": {
                "type": "number",
                "operation": "lt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "check-critical",
      "name": "Is Critical?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [1540, 330]
    },
    {
      "parameters": {
        "channel": "#alerts-critical",
        "text": "=ðŸš¨ *CRITICAL CHURN RISK*\n\n*Client:* {{ $json.company_name }}\n*Health Score:* {{ $json.health_score }}/100\n*Contract Value:* ${{ $json.contract_value }}\n*Primary Risk:* {{ $json.primary_risk?.factor || 'Multiple factors' }}\n\n*Risk Details:*\n{{ $json.primary_risk?.details || 'Multiple risk factors detected' }}\n\n---\n\n*Intervention Required:*\n{{ $json.intervention_plan.substring(0, 500) }}...\n\n<!channel> â€” Immediate attention needed",
        "otherOptions": {
          "includeLinkToWorkflow": true
        }
      },
      "id": "alert-critical-slack",
      "name": "Critical Alert to Slack",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [1760, 220]
    },
    {
      "parameters": {
        "channel": "#client-health",
        "text": "=âš ï¸ *At-Risk Client Detected*\n\n*Client:* {{ $json.company_name }}\n*Health Score:* {{ $json.health_score }}/100\n*Primary Risk:* {{ $json.primary_risk?.factor || 'Multiple factors' }}\n\n_Intervention plan logged. Please review and take action._",
        "otherOptions": {}
      },
      "id": "alert-atrisk-slack",
      "name": "At-Risk Alert to Slack",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [1760, 440]
    },
    {
      "parameters": {
        "jsCode": "// Generate weekly summary\nconst allAssessments = $('Calculate Risk Scores').all().map(i => i.json);\n\nconst summary = {\n  assessed_at: new Date().toISOString(),\n  total_clients: allAssessments.length,\n  healthy: allAssessments.filter(a => a.risk_level === 'low').length,\n  at_risk: allAssessments.filter(a => a.risk_level === 'medium').length,\n  critical: allAssessments.filter(a => a.risk_level === 'high').length,\n  avg_health_score: allAssessments.length > 0 \n    ? Math.round(allAssessments.reduce((sum, a) => sum + a.health_score, 0) / allAssessments.length)\n    : 0,\n  total_arr_at_risk: allAssessments\n    .filter(a => a.risk_level !== 'low')\n    .reduce((sum, a) => sum + ((a.contract_value || 0) * 12), 0),\n  critical_clients: allAssessments\n    .filter(a => a.risk_level === 'high')\n    .map(a => ({ name: a.company_name, score: a.health_score, risk: a.primary_risk?.factor })),\n  at_risk_clients: allAssessments\n    .filter(a => a.risk_level === 'medium')\n    .map(a => ({ name: a.company_name, score: a.health_score, risk: a.primary_risk?.factor }))\n};\n\nreturn [{ json: summary }];"
      },
      "id": "generate-summary",
      "name": "Generate Weekly Summary",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [880, -110]
    },
    {
      "parameters": {
        "channel": "#leadership",
        "text": "=ðŸ“Š *Weekly Client Health Report*\n\n*Assessment Date:* {{ new Date($json.assessed_at).toLocaleDateString() }}\n\n---\n\n*Portfolio Overview*\nâ€¢ Total Clients: {{ $json.total_clients }}\nâ€¢ Average Health Score: {{ $json.avg_health_score }}/100\n\n*Risk Distribution*\nâœ… Healthy: {{ $json.healthy }}\nâš ï¸ At Risk: {{ $json.at_risk }}\nðŸš¨ Critical: {{ $json.critical }}\n\n*Revenue at Risk*\nðŸ’° ARR in danger: ${{ $json.total_arr_at_risk.toLocaleString() }}\n\n{{ $json.critical > 0 ? '\\n*Critical Clients Requiring Attention:*\\n' + $json.critical_clients.map(c => `â€¢ ${c.name} (${c.score}/100) - ${c.risk || 'Multiple factors'}`).join('\\n') : '' }}\n\n_Full report available in Health Score History sheet_",
        "otherOptions": {}
      },
      "id": "send-weekly-summary",
      "name": "Send Weekly Summary",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [1100, -110]
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $env.XGROWTHOS_MASTER_SHEET_ID }}"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "Weekly_Health_Summary"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "assessed_at": "={{ $json.assessed_at }}",
            "total_clients": "={{ $json.total_clients }}",
            "healthy_count": "={{ $json.healthy }}",
            "at_risk_count": "={{ $json.at_risk }}",
            "critical_count": "={{ $json.critical }}",
            "avg_health_score": "={{ $json.avg_health_score }}",
            "total_arr_at_risk": "={{ $json.total_arr_at_risk }}"
          }
        }
      },
      "id": "log-weekly-summary",
      "name": "Log Weekly Summary",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [1320, -110]
    }
  ],
  "connections": {
    "Weekly Risk Assessment (Monday 6am)": {
      "main": [
        [
          { "node": "Get Active Clients", "type": "main", "index": 0 },
          { "node": "Get Meeting History", "type": "main", "index": 0 },
          { "node": "Get Performance History", "type": "main", "index": 0 },
          { "node": "Get Support Tickets", "type": "main", "index": 0 },
          { "node": "Get Client Communications", "type": "main", "index": 0 }
        ]
      ]
    },
    "Get Active Clients": {
      "main": [
        [
          { "node": "Merge All Data", "type": "main", "index": 0 }
        ]
      ]
    },
    "Get Meeting History": {
      "main": [
        [
          { "node": "Merge All Data", "type": "main", "index": 1 }
        ]
      ]
    },
    "Get Performance History": {
      "main": [
        [
          { "node": "Merge All Data", "type": "main", "index": 2 }
        ]
      ]
    },
    "Get Support Tickets": {
      "main": [
        [
          { "node": "Merge All Data", "type": "main", "index": 3 }
        ]
      ]
    },
    "Get Client Communications": {
      "main": [
        [
          { "node": "Merge All Data", "type": "main", "index": 4 }
        ]
      ]
    },
    "Merge All Data": {
      "main": [
        [
          { "node": "Calculate Risk Scores", "type": "main", "index": 0 }
        ]
      ]
    },
    "Calculate Risk Scores": {
      "main": [
        [
          { "node": "Log Health Scores", "type": "main", "index": 0 },
          { "node": "Filter At-Risk Clients", "type": "main", "index": 0 },
          { "node": "Generate Weekly Summary", "type": "main", "index": 0 }
        ]
      ]
    },
    "Filter At-Risk Clients": {
      "main": [
        [
          { "node": "Generate Intervention Playbook", "type": "main", "index": 0 }
        ]
      ]
    },
    "Generate Intervention Playbook": {
      "main": [
        [
          { "node": "Structure Intervention Plan", "type": "main", "index": 0 }
        ]
      ]
    },
    "Structure Intervention Plan": {
      "main": [
        [
          { "node": "Log Intervention Plan", "type": "main", "index": 0 },
          { "node": "Is Critical?", "type": "main", "index": 0 }
        ]
      ]
    },
    "Is Critical?": {
      "main": [
        [
          { "node": "Critical Alert to Slack", "type": "main", "index": 0 }
        ],
        [
          { "node": "At-Risk Alert to Slack", "type": "main", "index": 0 }
        ]
      ]
    },
    "Generate Weekly Summary": {
      "main": [
        [
          { "node": "Send Weekly Summary", "type": "main", "index": 0 },
          { "node": "Log Weekly Summary", "type": "main", "index": 0 }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    { "name": "XGrowthOS" },
    { "name": "Client Success" },
    { "name": "Churn Prevention" },
    { "name": "CSM Suite" }
  ],
  "triggerCount": 1,
  "pinData": {}
}
